---
tags: C++ Python
---

# 写在前面

刷lc从Python转向C++, 不只是语法层面, 还要改变很多的API, 这次记录一下C++和Python在字符串方面的一些区别, 供参考.

# 基本区别

Python字符串是不可变类型, 而C++string为容器, 可变类型. 



# 字符串创建

## Python

```python
s1='1'
s2='abc'
s3="45"
s4=r"D:\Desktop"
```

单双引号都可以, 并且支持原生(raw)字符串. 

>   小坑:
>
>   原生字符串不支持单字符, 即`s=r'\'`这样的写法是会报错的, 只能老老实实转义:`s='\\`.



## C++

```cpp
string s1="123";
// string s2='1';// error
string s3{"abc"}; //initializer_list, C++11
```

单引号和双引号并不能混用, 需要注意单引号只能表示单一字符, `char`类型, 而双引号表示字符串类型(`char*`), 除非使用`string`以及相关构造函数, 否则默认的类型为`const char*`, 例如:

```cpp
void t1() {
    auto s1 = "abc";
    cout << typeid(s1).name() << endl; // PKc

    auto s2 = "bcd"s; // 字符串字面量C++14
    cout << typeid(s2).name() << endl;
    string s3 = "bcd";
    cout << typeid(s3).name() << endl;
    /*NSt3__112basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE
    NSt3__112basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE*/
}
```



# 主要操作

|            操作            | Python                                        | C++                                                          |
| :------------------------: | --------------------------------------------- | ------------------------------------------------------------ |
|       `s1`中查找`s2`       | `s1.find(s2)`, <br />找到返回索引, 否则返回-1 | `s1.find(s2)`, 找到返回索引,<br />否则返回`string::npos`     |
|       取子串`[1,5]`        | `s[1:6]`, 左闭右开区间取值                    | `s.substr(1, 5)`表示从索引1开始取, <br />取包括1在内的5个字符 |
| 连接字符串<br />`s1`和`s2` | 加号或者`+=`连接                              | 加号或者`+=`连接                                             |
|         字符串比较         | 字典序比较, 使用比较运算符                    | 字典序比较, 使用比较运算符                                   |
|                            |                                               |                                                              |





# 判断字符满足条件

|      条件       | Python        | C++          |
| :-------------: | ------------- | ------------ |
|   是否为数字    | `c.isdigit()` | `isdigit(c)` |
|   是否为字母    | `c.isalpha()` |              |
| 是否为小写字母  |               |              |
| 是否为大写字母  |               |              |
| 是否为ASCII字符 |               |              |
|                 |               |              |



# 类型转换

|      转换方向       | Python函数              | C++函数            |
| :-----------------: | ----------------------- | ------------------ |
|    字符串->整数     | `int()`, 还支持不同数制 | `stoi()`           |
|   字符串->浮点数    | `eval()`                | `from_chars()`[^1] |
| 浮点数/整数->字符串 | `str()`                 | `to_string()`      |

>   Python的字符串转换还是相当方便的, 并且支持浮点数

[^1]:C++17, 头文件charconv. [std::from_chars, std::from_chars_result - cppreference.com](https://en.cppreference.com/w/cpp/utility/from_chars);

## C++

```cpp
void t5() {
    cout << to_string(123) << endl;
    cout << stoi("123") << endl;
    cout << stoi("2.123") << endl;
    char s[10] = {'3', '.', '1', '4', '\0'};
    double val{};
    from_chars(s, s + 4, val);
    cout << val << endl;
    string s2{"0.618"};
    from_chars(s2.data(), s2.data() + s2.size(), val);
    cout << val << endl;
    /*123
    123
    2
    3.14
    0.618*/
}
```

## Python

```python
In [6]: eval('3.14')
Out[6]: 3.14

In [7]: int('123')
Out[7]: 123

In [8]: str(12.3)
Out[8]: '12.3'
```


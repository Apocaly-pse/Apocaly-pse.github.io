---
tags: C++ gdb
---

# 写在前面









>   参考:
>
>   1.   [A Sample GDB Session](https://sourceware.org/gdb/current/onlinedocs/gdb#Sample-Session)
>   2.   [GDB Tutorial](https://web.eecs.umich.edu/~sugih/pointers/summary.html);
>   3.   [How to Debug Using GDB](https://cs.baylor.edu/~donahoo/tools/gdb/tutorial.html);



# 调试之前



## 安装gdb

>   M1系列的MacOS不能安装, 这里我就以阿里云的服务器为例进行演示了, 操作系统是Intel的Ubuntu20.04

```bash
sudo apt install gdb
```

检查是否安装:
```bash
$ gdb --version
GNU gdb (Ubuntu 9.2-0ubuntu1~20.04.1) 9.2
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
```

没有问题. 

## 编译程序

针对需要调试的程序, 首先在编译时候一定要加上`-g`选项, 方便读取调试信息(相当于VS的Debug模式, 可执行程序会相应变大). 



# 一个简单的例子

## C++代码实例

这里相当于是走了一遍参考内容3的例子, 首先来看代码:

```cpp
#include <iostream>
#include <cmath>

using namespace std;

int ComputeFactorial(int number) {
    int fact = 0;

    for (int j = 1; j <= number; j++) {
        fact = fact * j;
    }

    return fact;
}

double ComputeSeriesValue(double x, int n) {
    double seriesValue = 0.0;
    double xpow = 1;

    for (int k = 0; k <= n; k++) {
        seriesValue += xpow / ComputeFactorial(k);
        xpow = xpow * x;
    }

    return seriesValue;
}

int main() {
    cout << "This program is used to compute the value of the following series "
            ": "
         << endl;

    cout << "(x^0)/0! + (x^1)/1! + (x^2)/2! + (x^3)/3! + (x^4)/4! + ........ + "
            "(x^n)/n! "
         << endl;

    cout << "Please enter the value of x : ";

    double x;
    cin >> x;

    int n;
    cout << endl << "Please enter an integer value for n : ";
    cin >> n;
    cout << endl;

    double seriesValue = ComputeSeriesValue(x, n); // 函数入口
    cout << "The value of the series for the values entered is " << seriesValue
         << endl;

    return 0;
}

```

编译一下:

```bash
g++ -g broken.cpp -o broken
```

运行看看哪里有问题:

```bash
./broken
```

>   无论输入是什么，输出都是 inf。-g 选项很重要，因为它支持有意义的 GDB 调试。

## 开始调试

打断点:

```bash
```

